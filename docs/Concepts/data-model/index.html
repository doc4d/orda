<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<meta name="robots" content="noindex, nofollow">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ORDA - Object Relational Data Access Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ORDA - Object Relational Data Access Blog Atom Feed"><title data-react-helmet="true">Data Model Objects | ORDA - Object Relational Data Access</title><meta data-react-helmet="true" property="og:url" content="https://doc4d.github.io/orda/docs/Concepts/data-model"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Data Model Objects | ORDA - Object Relational Data Access"><meta data-react-helmet="true" name="description" content="The ORDA technology is based upon an automatic mapping of an underlying database structure. It also provides access to data through entity and entity selection objects. As a result, ORDA exposes the whole database as a set of data model objects."><meta data-react-helmet="true" property="og:description" content="The ORDA technology is based upon an automatic mapping of an underlying database structure. It also provides access to data through entity and entity selection objects. As a result, ORDA exposes the whole database as a set of data model objects."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://doc4d.github.io/orda/docs/Concepts/data-model"><link data-react-helmet="true" rel="alternate" href="https://doc4d.github.io/orda/docs/Concepts/data-model" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://doc4d.github.io/orda/docs/Concepts/data-model" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b83c5dda.css">
<link rel="preload" href="/assets/js/runtime~main.6e1234f9.js" as="script">
<link rel="preload" href="/assets/js/main.7c154117.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="4D Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="4D Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ORDA</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/Concepts/overview">Concepts</a><a class="navbar__item navbar__link" href="/docs/API/DataStoreClass">API</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="4D Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="4D Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ORDA</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/Concepts/overview">Concepts</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/API/DataStoreClass">API</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.png" alt="4D Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="4D Logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>ORDA</b></a><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Concepts/overview">What is ORDA?</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Concepts/data-model">Data Model Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Concepts/orda-classes">Data Model Classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Concepts/data">Working with data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Concepts/glossary">Glossary</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Data Model Objects</h1></header><p>The ORDA technology is based upon an automatic mapping of an underlying database structure. It also provides access to data through entity and entity selection objects. As a result, ORDA exposes the whole database as a set of data model objects. </p><p><img alt="schema" src="/assets/images/orda-schema-968dbf21abdfaabc7c02a3d1e425b596.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="structure-mapping"></a>Structure mapping<a class="hash-link" href="#structure-mapping" title="Direct link to heading">#</a></h2><p>When you call a datastore using the <a href="/docs/API/DataStoreClass#ds"><code>ds</code></a> or the <a href="/docs/API/DataStoreClass#open-datastore"><code>Open datastore</code></a> command, tables and fields of the corresponding structure are automatically referenced as properties of the returned <a href="#datastore">datastore</a> object:</p><ul><li>Tables are mapped to dataclasses.</li><li>Fields are mapped to storage attributes.</li><li>Relations are mapped to relation attributes - relation names are used as relation attribute names.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="general-rules"></a>General rules<a class="hash-link" href="#general-rules" title="Direct link to heading">#</a></h3><p>The following rules are applied for any conversions:</p><ul><li>Table, field, and relation names are mapped to object property names. </li><li>A datastore only references tables with a single primary key. The following tables are not referenced:<ul><li>Tables without a primary key</li><li>Tables with composite primary keys.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="remote-access-control"></a>Remote access control<a class="hash-link" href="#remote-access-control" title="Direct link to heading">#</a></h3><p>Tables and fields of a remote datastore accessed through the <a href="/docs/API/DataStoreClass#open-datastore"><code>Open datastore</code></a> command or <a href="/docs/Concepts/REST/gettingStarted.md">REST requests</a> must usually be explicitely exposed to REST requests to be available remotely. </p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>[ORDA class functions], including [computed attribute functions], must be explicitely exposed to REST requests. </p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="data-model-update"></a>Data model update<a class="hash-link" href="#data-model-update" title="Direct link to heading">#</a></h3><p>Any modifications applied at the level of the database structure invalidate the current ORDA model layer. These modifications include:</p><ul><li>adding or removing a table, a field, or a relation</li><li>renaming of a table, a field, or a relation</li><li>changing a core property of a field (type, unique, index, autoincrement, null value support)</li></ul><p>When the current ORDA model layer has been invalidated, it is automatically reloaded and updated in subsequent calls of the local <code>ds</code> datastore. Note that existing references to ORDA objects such as entities or entity selections will continue to use the model from which they have been created, until they are regenerated.</p><p>However, the updated ORDA model layer is not automatically available in the following contexts:</p><ul><li>a remote 4D application connected to 4D Server -- the remote application must reconnect to the server. </li><li>a remote datastore opened using <code>Open datastore</code> or through <a href="/docs/Concepts/REST/gettingStarted.md">REST calls</a> -- a new session must be opened. </li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="object-definition"></a>Object definition<a class="hash-link" href="#object-definition" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="datastore"></a>Datastore<a class="hash-link" href="#datastore" title="Direct link to heading">#</a></h3><p>The datastore is the interface object to a database. It builds a representation of the whole database as object. A datastore is made of a <strong>model</strong> and <strong>data</strong>:</p><ul><li>The model contains and describes all the dataclasses that make up the datastore. It is independant from the underlying database itself.</li><li>Data refers to the information that is going to be used and stored in this model. For example, names, addresses, and birthdates of employees are pieces of data that you can work with in a datastore.</li></ul><p>When handled through the code, the datastore is an object whose properties are all of the <a href="#dataclass">dataclasses</a> which have been specifically exposed. </p><p>You can handle the following datastores:</p><ul><li>a local datastore, based on the current 4D database, returned by the <code>ds</code> command (the main datastore).</li><li>one or more remote datastore(s) exposed as REST resources, returned by the <code>Open datastore</code> command. </li></ul><p>A datastore references only a single local or remote database.</p><p>The datastore object itself cannot be copied as an object:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$mydatastore:=OB Copy(ds) //returns null</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The datastore properties are however enumerable:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ARRAY TEXT($prop;0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> OB GET PROPERTY NAMES(ds;$prop)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //$prop contains the names of all the dataclasses</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The main (default) datastore is always available through the <code>ds</code> command, but the <code>Open datastore</code> command allows referencing any remote datastore. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="dataclass"></a>Dataclass<a class="hash-link" href="#dataclass" title="Direct link to heading">#</a></h3><p>A dataclass is the equivalent of a table. It is used as an object model and references all fields as attributes, including relational attributes (attributes built upon relations between dataclasses). Relational attributes can be used in queries like any other attribute.</p><p>All dataclasses in a 4D project are available as a property of the <code>ds</code> datastore. For remote datastores accessed through <code>Open datastore</code> or <a href="/docs/Concepts/REST/gettingStarted.md">REST requests</a>, the <strong>Expose as REST resource</strong> option must be selected at the 4D structure level for each exposed table that you want to be exposed as dataclass in the datastore. </p><p>For example, consider the following database table:</p><p><img src="data:image/png;base64,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"></p><p>The <code>Company</code> table is available as a <a href="#dataclass">dataclass</a> in the <code>ds</code> datastore. You can write:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $compClass : cs.Company //declares a $compClass object variable of the Company class</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$compClass:=ds.Company //assigns the Company dataclass reference to $compClass</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A dataclass object can contain:</p><ul><li>attributes</li><li>relation attributes</li><li><a href="###">computed attributes</a></li></ul><p>The dataclass offers an abstraction of the physical database and allows handling a conceptual data model with specific features such as computed attributes. The dataclass is the only means to query the datastore. A query is done from a single dataclass. Queries are built around attributes and relation attribute names of the dataclasses. So the relation attributes are the means to involve several linked tables in a query.</p><p>The dataclass object itself cannot be copied as an object:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$mydataclass:=OB Copy(ds.Employee) //returns null</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The dataclass properties are however enumerable:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ARRAY TEXT($prop;0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">OB GET PROPERTY NAMES(ds.Employee;$prop)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//$prop contains the names of all the dataclass attributes</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="attribute"></a>Attribute<a class="hash-link" href="#attribute" title="Direct link to heading">#</a></h3><p>Dataclass properties are attribute objects describing the underlying fields or relations. For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $nameAttribute; $revenuesAttribute : Object</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $nameAttribute:=ds.Company.name //reference to class attribute</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $revenuesAttribute:=ds.Company[&quot;revenues&quot;] //alternate way</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This code assigns to <code>$nameAttribute</code> and <code>$revenuesAttribute</code> references to the <code>name</code> and <code>revenues</code> attributes of the <code>Company</code> class. This syntax does NOT return values held inside of the attribute, but instead returns objects describing the attributes themselves, that you can handle using the <a href="/docs/API/DataClassAttribute.md"><code>DataClassAttribute</code> class API</a>. To handle values, you need to go through <a href="#entity">Entities</a>.</p><p>All eligible fields in a table are available as attributes of their <a href="#dataclass">dataclass</a>. Remote datastores accessed through <code>Open datastore</code> or <a href="/docs/Concepts/REST/gettingStarted.md">REST requests</a> must expose as REST resource each field to be used as a dataclass attribute. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storage-and-relation-attributes"></a>Storage and Relation attributes<a class="hash-link" href="#storage-and-relation-attributes" title="Direct link to heading">#</a></h4><p>Dataclass attributes come in several kinds: storage, relatedEntity, relatedEntities, or computed (<em>aka</em> calculated). Attributes that are scalar (<em>i.e.</em>, provide only a single value) support all the standard data types (integer, text, object, etc.).</p><ul><li>A <strong>storage attribute</strong> is equivalent to a field in a database and can be indexed. Values assigned to a storage attribute are stored as part of the entity when it is saved. When a storage attribute is accessed, its value comes directly from the datastore. Storage attributes are the most basic building block of an entity and are defined by name and data type.</li><li>A <strong>relation attribute</strong> provides access to other entities. Relation attributes can result in either a single entity (or no entity) or an entity selection (0 to N entities). Relation attributes are built upon &quot;classic&quot; relations in the relational structure to provide direct access to related entity or related entities. Relation attributes are directy available in ORDA using their names.</li></ul><p>For example, consider the following partial database structure and the relation properties:</p><p><img src="/assets/images/structure2-1318c645562cced92c3748ecd4ea1785.png"></p><p>All storage attributes will be automatically available:</p><ul><li>in the Project dataclass: &quot;ID&quot;, &quot;name&quot;, and &quot;companyID&quot;</li><li>in the Company dataclass: &quot;ID&quot;, &quot;name&quot;, and &quot;discount&quot;</li></ul><p>In addition, the following relation attributes will also be automatically available:</p><ul><li>in the Project dataclass: <strong>theClient</strong> attribute, of the &quot;relatedEntity&quot; kind; there is at most one Company for each Project (the client)</li><li>in the Company dataclass: <strong>companyProjects</strong> attribute, of the &quot;relatedEntities&quot; kind; for each Company there is any number of related Projects.</li></ul><p>All dataclass attributes are exposed as properties of the dataclass:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Company available attributes</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Company.companyProjects  //relatedEntities</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Company.discount  </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Company.ID</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Company.name</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Project available attributes</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Project.companyID  </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Project.ID  </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Project.name</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.Project.theClient //relatedEntity</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Keep in mind that these objects describe attributes, but do not give access to data. Reading or writing data is done through <a href="#entity">entity objects</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="computed-attributes"></a>Computed attributes<a class="hash-link" href="#computed-attributes" title="Direct link to heading">#</a></h4><p><a href="/docs/Concepts/orda-classes#computed-attributes">Computed attributes</a> are declared using a <code>get &lt;attributeName&gt;</code> function in the <a href="/docs/Concepts/orda-classes#entity-class">Entity class definition</a>. Their value is not stored but evaluated each time they are accessed. They do not belong to the underlying database structure, but are usually built upon it and can be used as any attribute of the data model. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="entity"></a>Entity<a class="hash-link" href="#entity" title="Direct link to heading">#</a></h3><p>An entity is the equivalent of a record. It is actually an object that references a record in the database. It can be seen as an instance of a <a href="#dataclass">dataclass</a>, like a record of the table matching the dataclass. However, an entity also contains data correlated to the database related to the datastore. </p><p>The purpose of the entity is to manage data (create, read, update, delete). When an entity reference is obtained by means of an entity selection, it also retains information about the entity selection which allows iteration through the selection.</p><p>For example, to create an entity:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $status : Object</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employee : cs.EmployeeEntity //declares a variable of the EmployeeEntity class type</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employee:=ds.Employee.new()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employee.firstName:=&quot;Mary&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employee.lastName:=&quot;Smith&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $status:=$employee.save()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The entity object itself cannot be copied as an object:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $myentity:=OB Copy(ds.Employee.get(1)) //returns null</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The entity properties are however enumerable:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ARRAY TEXT($prop;0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> OB GET PROPERTY NAMES(ds.Employee.get(1);$prop)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //$prop contains the names of all the entity attributes</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="entity-selection"></a>Entity selection<a class="hash-link" href="#entity-selection" title="Direct link to heading">#</a></h3><p>An entity selection is an object containing one or more reference(s) to entities belonging to the same dataclass. It is usually created as a result of a query or returned from a relation attribute. An entity selection can contain 0, 1 or X entities from the dataclass -- where X can represent the total number of entities contained in the dataclass.</p><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $e : cs.EmployeeSelection //declares a $e object variable of the EmployeeSelection class type</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$e:=ds.Employee.all() //assigns the resulting entity selection reference to the $e variable</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The entity selection object itself cannot be copied as an object:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $myentitysel:=OB Copy(ds.Employee.all()) //returns null</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The entity selection properties are however enumerable:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly 4d"><pre tabindex="0" class="prism-code language-4d codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ARRAY TEXT($prop;0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> OB GET PROPERTY NAMES(ds.Employee.all();$prop)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //$prop contains the names of the entity selection properties</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //(&quot;length&quot;, 00&quot;, &quot;01&quot;...)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="ordered-or-unordered-entity-selection"></a>Ordered or unordered entity selection<a class="hash-link" href="#ordered-or-unordered-entity-selection" title="Direct link to heading">#</a></h4><p>For optimization reasons, by default ORDA usually creates unordered entity selections, except when you call the <code>orderBy()</code> function or use specific options. In this documentation, unless specified, &quot;entity selection&quot; usually refers to an &quot;unordered entity selection&quot;.</p><p>Ordered entity selections are created only when necessary or when specifically requested using options, i.e. in the following cases:</p><ul><li>result of an <code>orderBy()</code> on a selection (of any type)</li><li>result of an <code>orderByFormula()</code> on a selection (of any type)</li><li>result of the <code>newSelection()</code> function with the <code>dk keep ordered</code> option</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Ordered entity selections support duplicated entity references. On the other hand, when an ordered entity selection becomes an unordered entity selection, any repeated entity references are removed.</p></div></div><p>Unordered entity selections are created in all other cases, including:</p><ul><li>result of a <code>query()</code> on a selection (of any type) or a <code>query()</code> on a dataclass,</li><li>result of a <code>all()</code>, <code>fromCollection()</code>, or <code>newSelection()</code> (without option) function on a dataclass,</li><li>result of various functions from the entity selection class, whatever the input selection types: <code>or()</code>, <code>and()</code>, <code>add()</code>, <code>copy()</code>, <code>extract()</code>, <code>slice()</code>, <code>drop()</code>...</li><li>result of a relation such as <code>$empSel:=company.employees</code>, or a projection such as <code>$empSel.name</code>,</li><li>result of an <code>entity.getSelection()</code> function.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Entity selections built upon remote datastores are always ordered. </p></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/4d/orda/edit/main/docs/Concepts/data-model.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Concepts/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« What is ORDA?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Concepts/orda-classes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Model Classes Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#structure-mapping" class="table-of-contents__link">Structure mapping</a><ul><li><a href="#general-rules" class="table-of-contents__link">General rules</a></li><li><a href="#remote-access-control" class="table-of-contents__link">Remote access control</a></li><li><a href="#data-model-update" class="table-of-contents__link">Data model update</a></li></ul></li><li><a href="#object-definition" class="table-of-contents__link">Object definition</a><ul><li><a href="#datastore" class="table-of-contents__link">Datastore</a></li><li><a href="#dataclass" class="table-of-contents__link">Dataclass</a></li><li><a href="#attribute" class="table-of-contents__link">Attribute</a></li><li><a href="#entity" class="table-of-contents__link">Entity</a></li><li><a href="#entity-selection" class="table-of-contents__link">Entity selection</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Blog</a></li><li class="footer__item"><a href="https://discuss.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Forum</a></li><li class="footer__item"><a href="https://www.facebook.com/4Dsoftware/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://twitter.com/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.youtube.com/user/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/4D/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items"><li class="footer__item"><a href="https://developer.4d.com/docs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Documentation</a></li><li class="footer__item"><a href="https://doc.4d.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Doc Center (Legacy)</a></li><li class="footer__item"><a href="http://kb.4d.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Knowledge Base</a></li><li class="footer__item"><a href="https://us.4d.com/product-download" target="_blank" rel="noopener noreferrer" class="footer__link-item">Downloads</a></li><li class="footer__item"><a href="https://us.4d.com/resources" target="_blank" rel="noopener noreferrer" class="footer__link-item">Resources</a></li><li class="footer__item"><a href="https://us.4d.com/4d-technical-support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items"><li class="footer__item"><a href="https://us.4d.com/about-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">About 4D</a></li><li class="footer__item"><a href="https://us.4d.com/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact us</a></li><li class="footer__item"><a href="https://us.4d.com/4d-around-the-world" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D around the world</a></li><li class="footer__item"><a href="https://us.4d.com/careers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 4D SAS - All rights reserved</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6e1234f9.js"></script>
<script src="/assets/js/main.7c154117.js"></script>
</body>
</html>