(self.webpackChunkgo_mobile=self.webpackChunkgo_mobile||[]).push([[221],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return m},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,k=u["".concat(s,".").concat(c)]||u[c]||d[c]||l;return n?a.createElement(k,i(i({ref:t},m),{},{components:n})):a.createElement(k,i({ref:t},m))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5445:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return m},default:function(){return u}});var a=n(2122),r=n(9756),l=(n(7294),n(3905)),i=["components"],o={id:"EntitySelectionClass",title:"EntitySelection"},s=void 0,p={unversionedId:"API/EntitySelectionClass",id:"API/EntitySelectionClass",isDocsHomePage:!1,title:"EntitySelection",description:"An entity selection is an object containing one or more reference(s) to entities belonging to the same Dataclass. An entity selection can contain 0, 1 or X entities from the dataclass -- where X can represent the total number of entities contained in the dataclass.",source:"@site/docs/API/EntitySelectionClass.md",sourceDirName:"API",slug:"/API/EntitySelectionClass",permalink:"/orda/docs/API/EntitySelectionClass",editUrl:"https://github.com/4d/orda/edit/main/docs/API/EntitySelectionClass.md",version:"current",frontMatter:{id:"EntitySelectionClass",title:"EntitySelection"},sidebar:"api",previous:{title:"DataClassAttribute",permalink:"/orda/docs/API/DataClassAttributeClass"},next:{title:"Entity",permalink:"/orda/docs/API/EntityClass"}},m=[{value:"Summary",id:"summary",children:[]},{value:"Create entity selection",id:"create-entity-selection",children:[]},{value:"[<em>index</em>]",id:"index",children:[]},{value:".<em>attributeName</em>",id:"attributename",children:[]},{value:".add()",id:"add",children:[]},{value:".and()",id:"and",children:[]},{value:".average()",id:"average",children:[]},{value:".contains()",id:"contains",children:[]},{value:".count()",id:"count",children:[]},{value:".copy()",id:"copy",children:[]},{value:".distinct()",id:"distinct",children:[]},{value:".drop()",id:"drop",children:[]},{value:".extract()",id:"extract",children:[]},{value:".first()",id:"first",children:[]},{value:".getDataClass()",id:"getdataclass",children:[]},{value:".isAlterable()",id:"isalterable",children:[]},{value:".isOrdered()",id:"isordered",children:[]},{value:".last()",id:"last",children:[]},{value:".length",id:"length",children:[]},{value:".max()",id:"max",children:[]},{value:".min()",id:"min",children:[]},{value:".minus()",id:"minus",children:[]},{value:".or()",id:"or",children:[]},{value:".orderBy()",id:"orderby",children:[]},{value:".orderByFormula( )",id:"orderbyformula-",children:[]},{value:".query()",id:"query",children:[]},{value:".queryPath",id:"querypath",children:[]},{value:".queryPlan",id:"queryplan",children:[]},{value:".refresh()",id:"refresh",children:[]},{value:".selected()",id:"selected",children:[]},{value:".slice()",id:"slice",children:[]},{value:".sum( )",id:"sum-",children:[]},{value:".toCollection( )",id:"tocollection-",children:[]}],d={toc:m};function u(e){var t=e.components,o=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"An entity selection is an object containing one or more reference(s) to ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#entity"},"entities")," belonging to the same ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#dataclass"},"Dataclass"),". An entity selection can contain 0, 1 or X entities from the dataclass -- where X can represent the total number of entities contained in the dataclass. "),(0,l.kt)("p",null,"Entity selections can be created from existing selections using various functions of the ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass"},(0,l.kt)("inlineCode",{parentName:"a"},"DataClass")," class")," such as ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#all"},(0,l.kt)("inlineCode",{parentName:"a"},".all()"))," or ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()")),", or functions of the ",(0,l.kt)("inlineCode",{parentName:"p"},"EntityClass")," class itself, such as ",(0,l.kt)("a",{parentName:"p",href:"#and"},(0,l.kt)("inlineCode",{parentName:"a"},".and()"))," or ",(0,l.kt)("a",{parentName:"p",href:"#orderby"},(0,l.kt)("inlineCode",{parentName:"a"},"orderBy()")),". You can also create blank entity selections using the ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#newselection"},(0,l.kt)("inlineCode",{parentName:"a"},"dataClass.newSelection()"))," function or the ",(0,l.kt)("a",{parentName:"p",href:"#create-new-selection"},(0,l.kt)("inlineCode",{parentName:"a"},"Create new selection"))," command."),(0,l.kt)("h3",{id:"summary"},"Summary"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#91index93"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#attributename"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#add"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#and"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#average"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#contains"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#count"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#distinct"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#drop"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#extract"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#first"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#getdataclass"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#isalterable"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#isordered"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#last"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#length"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#max"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#min"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#minus"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#or"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#orderby"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#orderbyformula"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#query"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#querypath"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#queryplan"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#refresh"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#selected"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#slice"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#sum"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"#tocollection"}),(0,l.kt)("p",null,"\xa0","\xa0","\xa0","\xa0"))))),(0,l.kt)("h2",{id:"create-entity-selection"},"Create entity selection"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Create entity selection")," ( ",(0,l.kt)("em",{parentName:"p"},"dsTable")," : Table { ; ",(0,l.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"dsTable"),(0,l.kt)("td",{parentName:"tr",align:null},"Table"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Table in the 4D database whose current selection will be used to build the entity selection")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"settings"),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Build option: context")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity selection matching the dataclass related to the given table")))),(0,l.kt)("h4",{id:"description"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"Create entity selection")," command builds and returns a new, ",(0,l.kt)("a",{parentName:"p",href:"ORDA/entities.md#shareable-or-alterable-entity-selections"},"alterable")," entity selection related to the dataclass matching the given ",(0,l.kt)("em",{parentName:"p"},"dsTable"),", according to the current selection of this table."),(0,l.kt)("p",null,"If the current selection is sorted, an ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"ordered")," entity selection is created (the order of the current selection is kept). If the current selection is unsorted, an unordered entity selection is created. "),(0,l.kt)("p",null,"If the ",(0,l.kt)("em",{parentName:"p"},"dsTable")," is not exposed in ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataStoreClass#ds"},(0,l.kt)("inlineCode",{parentName:"a"},"ds")),", an error is returned. This command cannot be used with a Remote datastore."),(0,l.kt)("p",null,"In the optional ",(0,l.kt)("em",{parentName:"p"},"settings")," parameter, you can pass an object containing the following property:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"context"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:null},"Label for the ",(0,l.kt)("a",{parentName:"td",href:"ORDA/entities.md#clientserver-optimization"},"optimization context")," applied to the entity selection.")))),(0,l.kt)("h4",{id:"example"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},"var $employees : cs.EmployeeSelection\nALL RECORDS([Employee])\n$employees:=Create entity selection([Employee]) \n// The $employees entity selection now contains a set of reference\n// on all entities related to the Employee dataclass\n")),(0,l.kt)("h4",{id:"see-also"},"See also"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#newselection"},(0,l.kt)("inlineCode",{parentName:"a"},"dataClass.newSelection()"))),(0,l.kt)("h2",{id:"index"},"[",(0,l.kt)("em",{parentName:"h2"},"index"),"]"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"[","index","]"))," : 4D.Entity"),(0,l.kt)("h4",{id:"description-1"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"EntitySelection[index]")," notation ","allows you to access entities within the entity selection using the standard collection syntax",": pass the position of the entity you want to get in the ",(0,l.kt)("em",{parentName:"p"},"index")," parameter."),(0,l.kt)("p",null,"Note that the corresponding entity is reloaded from the datastore."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"index")," can be any number between 0 and ",(0,l.kt)("inlineCode",{parentName:"p"},".length"),"-1."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"index")," is out of range, an error is returned."),(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"index")," corresponds to a dropped entity, a Null value is returned.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Warning"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"EntitySelection[index]")," is a non assignable expression, which means that it cannot be used as en editable entity reference with methods like ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/EntityClass#lock"},(0,l.kt)("inlineCode",{parentName:"a"},".lock()"))," or ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/EntityClass#save"},(0,l.kt)("inlineCode",{parentName:"a"},".save()")),". To work with the corresponding entity, you need to assign the returned expression to an assignable expression, such as a variable. Examples:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' $sel:=ds.Employee.all() //create the entity selection\n  //invalid statements:\n $result:=$sel[0].lock() //will NOT work\n $sel[0].lastName:="Smith" //will NOT work\n $result:=$sel[0].save() //will NOT work\n  //valid code:\n $entity:=$sel[0]  //OK\n $entity.lastName:="Smith" //OK\n $entity.save() //OK\n')),(0,l.kt)("h4",{id:"example-1"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@")\n $employee:=$employees[2]  // The 3rd entity of the $employees entity selection is reloaded from the database\n')),(0,l.kt)("h2",{id:"attributename"},".",(0,l.kt)("em",{parentName:"h2"},"attributeName")),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},".attributeName"))," : Collection",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},".attributeName"))," : 4D.EntitySelection"),(0,l.kt)("h4",{id:"description-2"},"Description"),(0,l.kt)("p",null,"Any dataclass attribute can be used as a property of an entity selection to return ",'a "projection" of values for the attribute in the entity selection',". Projected values can be a collection or a new entity selection, depending on the ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassAttributeClass#kind"},"kind")," (",(0,l.kt)("inlineCode",{parentName:"p"},"storage")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"relation"),") of the attribute."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,l.kt)("inlineCode",{parentName:"li"},"storage"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a collection of values of the same type as ",(0,l.kt)("em",{parentName:"li"},"attributeName"),"."),(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,l.kt)("inlineCode",{parentName:"li"},"relatedEntity"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a new entity selection of related values of the same type as ",(0,l.kt)("em",{parentName:"li"},"attributeName"),". Duplications are removed (an unordered entity selection is returned)."),(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,l.kt)("inlineCode",{parentName:"li"},"relatedEntities"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a new entity selection of related values of the same type as ",(0,l.kt)("em",{parentName:"li"},"attributeName"),". Duplications are removed (an unordered entity selection is returned).")),(0,l.kt)("p",null,"When a relation attribute is used as a property of an entity selection, the result is always another entity selection, even if only one entity is returned. In this case, if no entities are returned, the result is an empty entity selection."),(0,l.kt)("p",null,"If the attribute does not exist in the entity selection, an error is returned. "),(0,l.kt)("h4",{id:"example-1-1"},"Example 1"),(0,l.kt)("p",null,"Projection of storage values:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," var $firstNames : Collection\n $entitySelection:=ds.Employee.all()\n $firstNames:=$entitySelection.firstName // firstName type is string\n")),(0,l.kt)("p",null,"The resulting collection is a collection of strings, for example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    "Joanna",\n    "Alexandra",\n    "Rick"\n]\n')),(0,l.kt)("h4",{id:"example-2"},"Example 2"),(0,l.kt)("p",null,"Projection of related entity:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," var $es; $entitySelection : cs.EmployeeSelection\n $entitySelection:=ds.Employee.all()\n $es:=$entitySelection.employer // employer is related to a Company dataClass\n")),(0,l.kt)("p",null,"The resulting object is an entity selection of Company with duplications removed (if any)."),(0,l.kt)("h4",{id:"example-3"},"Example 3"),(0,l.kt)("p",null,"Projection of related entities:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," var $es : cs.EmployeeSelection\n $es:=ds.Employee.all().directReports // directReports is related to Employee dataclass\n")),(0,l.kt)("p",null,"The resulting object is an entity selection of Employee with duplications removed (if any)."),(0,l.kt)("h2",{id:"add"},".add()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v18 R5|Only supports alterable entity selections| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".add"),"( ",(0,l.kt)("em",{parentName:"p"},"entity")," : 4D.Entity ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entity"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity to be added to the entity selection")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity selection including the added ",(0,l.kt)("em",{parentName:"td"},"entity"))))),(0,l.kt)("h4",{id:"description-3"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".add()")," function ","adds the specified ",(0,l.kt)("em",{parentName:"p"},"entity")," to the entity selection and returns the modified entity selection",". "),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function modifies the original entity selection.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Warning:")," The entity selection must be ",(0,l.kt)("em",{parentName:"p"},"alterable"),", i.e. it has been created for example by ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#newselection"},(0,l.kt)("inlineCode",{parentName:"a"},".newSelection()"))," or ",(0,l.kt)("inlineCode",{parentName:"p"},"Create entity selection"),", otherwise ",(0,l.kt)("inlineCode",{parentName:"p"},".add()")," will return an error. Shareable entity selections do not accept the addition of entities. For more information, please refer to the ",(0,l.kt)("a",{parentName:"p",href:"ORDA/entities.md#shareable-or-alterable-entity-selections"},"Shareable or alterable entity selections")," section. "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If the entity selection is ordered, ",(0,l.kt)("em",{parentName:"li"},"entity")," is added at the end of the selection. If a reference to the same entity already belongs to the entity selection, it is duplicated and a new reference is added."),(0,l.kt)("li",{parentName:"ul"},"If the entity selection is unordered, ",(0,l.kt)("em",{parentName:"li"},"entity")," is added anywhere in the selection, with no specific order.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"For more information, please refer to the ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"Ordered or unordered entity selection")," section.")),(0,l.kt)("p",null,"The modified entity selection is returned by the function, so that function calls can be chained. "),(0,l.kt)("p",null,"An error occurs if ",(0,l.kt)("em",{parentName:"p"},"entity")," and the entity selection are not related to the same Dataclass. If ",(0,l.kt)("em",{parentName:"p"},"entity")," is Null, no error is raised."),(0,l.kt)("h4",{id:"example-1-2"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"S@")\n $employee:=ds.Employee.new()\n $employee.lastName:="Smith"\n $employee.save()\n $employees.add($employee) //The $employee entity is added to the $employees entity selection\n')),(0,l.kt)("h4",{id:"example-2-1"},"Example 2"),(0,l.kt)("p",null,"Calls to the function can be chained:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $sel : cs.ProductSelection\n var $p1;$p2;$p3 : cs.ProductEntity\n\n $p1:=ds.Product.get(10)\n $p2:=ds.Product.get(11)\n $p3:=ds.Product.get(12)\n $sel:=ds.Product.query("ID > 50")\n $sel:=$sel.add($p1).add($p2).add($p3)\n')),(0,l.kt)("h2",{id:"and"},".and()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".and"),"( ",(0,l.kt)("em",{parentName:"p"},"entity")," : 4D.Entity ) : 4D.EntitySelection",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".and"),"( ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entity"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity to intersect with")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entitySelection"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity selection to intersect with")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New entity selection with the result of intersection with logical AND operator")))),(0,l.kt)("h4",{id:"description-4"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".and()")," function ","combines the entity selection with an ",(0,l.kt)("em",{parentName:"p"},"entity")," or ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," parameter using the logical AND operator","; it returns a new, unordered entity selection that contains only the entities that are referenced in both the entity selection and the parameter."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you pass ",(0,l.kt)("em",{parentName:"li"},"entity")," as parameter, you combine this entity with the entity selection. If the entity belongs to the entity selection, a new entity selection containing only the entity is returned. Otherwise, an empty entity selection is returned."),(0,l.kt)("li",{parentName:"ul"},"If you pass ",(0,l.kt)("em",{parentName:"li"},"entitySelection")," as parameter, you combine both entity selections. A new entity selection that contains only the entities that are referenced in both selections is returned. If there is no intersecting entity, an empty entity selection is returned.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"You can compare ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"ordered and/or unordered entity selections"),". The resulting selection is always unordered.")),(0,l.kt)("p",null,"If the original entity selection or the ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," parameter is empty, or if the ",(0,l.kt)("em",{parentName:"p"},"entity")," is Null, an empty entity selection is returned. "),(0,l.kt)("p",null,"If the original entity selection and the parameter are not related to the same dataclass, an error is raised."),(0,l.kt)("h4",{id:"example-1-3"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees; $result : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@")   \n  //The $employees entity selection contains the entity\n  //with primary key 710 and other entities\n  //for ex. "Colin Hetrick" / "Grady Harness" / "Sherlock Holmes" (primary key 710)\n $employee:=ds.Employee.get(710) // Returns "Sherlock Holmes"\n \n $result:=$employees.and($employee) //$result is an entity selection containing   \n  //only the entity with primary key 710 ("Sherlock Holmes")\n')),(0,l.kt)("h4",{id:"example-2-2"},"Example 2"),(0,l.kt)("p",null,'We want to have a selection of employees named "Jones" who live in New York:'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $sel1; $sel2; $sel3 : cs.EmployeeSelection\n $sel1:=ds.Employee.query("name =:1";"Jones")\n $sel2:=ds.Employee.query("city=:1";"New York")\n $sel3:=$sel1.and($sel2)\n')),(0,l.kt)("h2",{id:"average"},".average()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v18 R6|Returns undefined if empty entity selection| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".average"),"( ",(0,l.kt)("em",{parentName:"p"},"attributePath")," : Text ) : Real"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Attribute path to be used for calculation")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Real"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Arithmetic mean (average) of entity attribute values (Undefined if empty entity selection)")))),(0,l.kt)("h4",{id:"description-5"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".average()")," function ","returns the arithmetic mean (average) of all the non-null values of ",(0,l.kt)("em",{parentName:"p"},"attributePath")," in the entity selection","."),(0,l.kt)("p",null,"Pass in the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," parameter the attribute path to evaluate."),(0,l.kt)("p",null,"Only numerical values are taken into account for the calculation. Note however that, if the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," of the entity selection contains mixed value types, ",(0,l.kt)("inlineCode",{parentName:"p"},".average()")," takes all scalar elements into account to calculate the average value. "),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Date values are converted to numerical values (seconds) and used to calculate the average.")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".average()")," returns ",(0,l.kt)("strong",{parentName:"p"},"undefined")," if the entity selection is empty or ",(0,l.kt)("em",{parentName:"p"},"attributePath")," does not contain numerical values."),(0,l.kt)("p",null,"An error is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is a related attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," designates an attribute that does not exist in the entity selection dataclass.")),(0,l.kt)("h4",{id:"example-4"},"Example"),(0,l.kt)("p",null,"We want to obtain a list of employees whose salary is higher than the average salary:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $averageSalary : Real\n var $moreThanAv : cs.EmployeeSelection\n $averageSalary:=ds.Employee.all().average("salary")\n $moreThanAv:=ds.Employee.query("salary > :1";$averageSalary)\n')),(0,l.kt)("h2",{id:"contains"},".contains()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".contains"),"( ",(0,l.kt)("em",{parentName:"p"},"entity")," : 4D.Entity ) : Boolean"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entity"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity to evaluate")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"True if the entity belongs to the entity selection, else False")))),(0,l.kt)("h4",{id:"description-6"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".contains()")," function ","returns true if entity reference belongs to the entity selection",", and false otherwise."),(0,l.kt)("p",null,"In ",(0,l.kt)("em",{parentName:"p"},"entity"),", specify the entity to search for in the entity selection. If entity is Null, the function will return false."),(0,l.kt)("p",null,"If ",(0,l.kt)("em",{parentName:"p"},"entity")," and the entity selection do not belong to the same dataclass, an error is raised."),(0,l.kt)("h4",{id:"example-5"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n \n $employees:=ds.Employee.query("lastName=:1";"H@")\n $employee:=ds.Employee.get(610)\n \n If($employees.contains($employee))\n    ALERT("The entity with primary key 610 has a last name beginning with H")\n Else\n    ALERT("The entity with primary key 610 does not have a last name beginning with H")\n End if\n')),(0,l.kt)("h2",{id:"count"},".count()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".count"),"( ",(0,l.kt)("em",{parentName:"p"},"attributePath")," : Text ) : Real"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Path of the attribute to be used for calculation")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Real"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of non null ",(0,l.kt)("em",{parentName:"td"},"attributePath")," values in the entity selection")))),(0,l.kt)("h4",{id:"description-7"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".count()")," function ","returns the number of entities in the entity selection with a non-null value in ",(0,l.kt)("em",{parentName:"p"},"attributePath"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Only scalar values are taken into account. Object or collection type values are considered as null values.")),(0,l.kt)("p",null,"An error is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is a related attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is not found in the entity selection dataclass.")),(0,l.kt)("h4",{id:"example-6"},"Example"),(0,l.kt)("p",null,"We want to find out the total number of employees for a company without counting any whose job title has not been specified:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $sel : cs.EmployeeSelection\n var $count : Real\n \n $sel:=ds.Employee.query("employer = :1";"Acme, Inc")\n $count:=$sel.count("jobtitle")\n')),(0,l.kt)("h2",{id:"copy"},".copy()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v18 R5|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".copy"),"( { ",(0,l.kt)("em",{parentName:"p"},"option")," : Integer } ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"option"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"ck shared"),": return a shareable entity selection")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Copy of the entity selection")))),(0,l.kt)("h4",{id:"description-8"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".copy()")," function ","returns a copy of the original entity selection","."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function does not modify the original entity selection.")),(0,l.kt)("p",null,"By default, if the ",(0,l.kt)("em",{parentName:"p"},"option")," parameter is omitted, the function returns a new, alterable entity selection (even if the function is applied to a shareable entity selection). Pass the ",(0,l.kt)("inlineCode",{parentName:"p"},"ck shared")," constant in the ",(0,l.kt)("em",{parentName:"p"},"option")," parameter if you want to create a shareable entity selection."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"For information on the shareable property of entity selections, please refer to the ",(0,l.kt)("a",{parentName:"p",href:"ORDA/entities.md#shareable-or-alterable-entity-selections"},"Shareable or alterable entity selections")," section. ")),(0,l.kt)("h4",{id:"example-7"},"Example"),(0,l.kt)("p",null,"You create a new, empty entity selection of products when the form is loaded:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," Case of\n    :(Form event code=On Load)\n       Form.products:=ds.Products.newSelection()\n End case\n \n")),(0,l.kt)("p",null,"Then this entity selection is updated with products and you want to share the products between several processes. You copy the Form.products entity selection as a shareable one:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," ...\n  // The Form.products entity selection is updated\n Form.products.add(Form.selectedProduct)\n \n Use(Storage)\n    If(Storage.products=Null)\n       Storage.products:=New shared object()\n    End if\n \n    Use(Storage.products)\n       Storage.products:=Form.products.copy(ck shared)\n    End use\n End use\n")),(0,l.kt)("h2",{id:"distinct"},".distinct()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".distinct"),"( ",(0,l.kt)("em",{parentName:"p"},"attributePath")," : Text { ; ",(0,l.kt)("em",{parentName:"p"},"option")," : Integer } ) : Collection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Path of attribute whose distinct values you want to get")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"option"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"dk diacritical"),': diacritical evaluation ("A" # "a" for example)')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection with only distinct values")))),(0,l.kt)("h4",{id:"description-9"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".distinct()")," function ","returns a collection containing only distinct (different) values from the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," in the entity selection",". "),(0,l.kt)("p",null,"The returned collection is automatically sorted. ",(0,l.kt)("strong",{parentName:"p"},"Null")," values are not returned."),(0,l.kt)("p",null,"In the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," parameter, pass the entity attribute whose distinct values you want to get. Only scalar values (text, number, boolean, or date) can be handled. If the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," leads to an object property that contains values of different types, they are first grouped by type and sorted afterwards. Types are returned in the following order:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"booleans"),(0,l.kt)("li",{parentName:"ol"},"strings"),(0,l.kt)("li",{parentName:"ol"},"numbers"),(0,l.kt)("li",{parentName:"ol"},"dates")),(0,l.kt)("p",null,"You can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"[]")," notation to designate a collection when ",(0,l.kt)("em",{parentName:"p"},"attributePath")," is a path within an object (see examples). "),(0,l.kt)("p",null,"By default, a non-diacritical evaluation is performed. If you want the evaluation to be case sensitive or to differentiate accented characters, pass the ",(0,l.kt)("inlineCode",{parentName:"p"},"dk diacritical")," constant in the ",(0,l.kt)("em",{parentName:"p"},"option")," parameter."),(0,l.kt)("p",null,"An error is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is a related attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is not found in the entity selection dataclass.")),(0,l.kt)("h4",{id:"examples"},"Examples"),(0,l.kt)("p",null,"You want to get a collection containing a single element per country name:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $countries : Collection\n $countries:=ds.Employee.all().distinct("address.country")\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"nicknames")," is a collection and ",(0,l.kt)("inlineCode",{parentName:"p"},"extra")," is an object attribute:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'$values:=ds.Employee.all().distinct("extra.nicknames[].first")\n')),(0,l.kt)("h2",{id:"drop"},".drop()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".drop"),"( { ",(0,l.kt)("em",{parentName:"p"},"mode")," : Integer } ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"mode"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"dk stop dropping on first error"),": stops method execution on first non-droppable entity")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Empty entity selection if successful, else entity selection containing non-droppable entity(ies)")))),(0,l.kt)("p",null,"|"),(0,l.kt)("h4",{id:"description-10"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".drop()")," function ","removes the entities belonging to the entity selection from the table related to its dataclass within the datastore",". The entity selection remains in memory."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Removing entities is permanent and cannot be undone. It is recommended to call this action in a transaction in order to have a rollback option.")),(0,l.kt)("p",null,"If a locked entity is encountered during the execution of ",(0,l.kt)("inlineCode",{parentName:"p"},".drop()"),", it is not removed. By default, the method processes all entities of the entity selection and returns non-droppable entities in the entity selection. If you want the method to stop execution at the first encountered non-droppable entity, pass the ",(0,l.kt)("inlineCode",{parentName:"p"},"dk stop dropping on first error")," constant in the ",(0,l.kt)("em",{parentName:"p"},"mode")," parameter."),(0,l.kt)("h4",{id:"example-8"},"Example"),(0,l.kt)("p",null,"Example without the ",(0,l.kt)("inlineCode",{parentName:"p"},"dk stop dropping on first error")," option:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees; $notDropped : cs.EmployeeSelection\n $employees:=ds.Employee.query("firstName=:1";"S@")\n $notDropped:=$employees.drop() // $notDropped is an entity selection containing all the not dropped entities\n If($notDropped.length=0) //The delete action is successful, all the entities have been deleted\n    ALERT("You have dropped "+String($employees.length)+" employees") //The dropped entity selection remains in memory\n Else\n    ALERT("Problem during drop, try later")\n End if\n')),(0,l.kt)("p",null,"Example with the ",(0,l.kt)("inlineCode",{parentName:"p"},"dk stop dropping on first error")," option:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees; $notDropped : cs.EmployeeSelection\n $employees:=ds.Employee.query("firstName=:1";"S@")\n $notDropped:=$employees.drop(dk stop dropping on first error) //$notDropped is an entity selection containing the first not dropped entity\n If($notDropped.length=0) //The delete action is successful, all the entities have been deleted\n    ALERT("You have dropped "+String($employees.length)+" employees") //The dropped entity selection remains in memory\n Else\n    ALERT("Problem during drop, try later")\n End if\n')),(0,l.kt)("h2",{id:"extract"},".extract()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v18 R3|Added|"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Attribute path whose values must be extracted to the new collection")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"targetPath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Target attribute path or attribute name")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"option"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"ck keep null"),": include null attributes in the returned collection (ignored by default)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection containing extracted values")))),(0,l.kt)("h4",{id:"description-11"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".extract()")," function ","returns a collection containing ",(0,l.kt)("em",{parentName:"p"},"attributePath")," values extracted from the entity selection",". "),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"attributePath")," can refer to:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"a scalar dataclass attribute,"),(0,l.kt)("li",{parentName:"ul"},"related entity,"),(0,l.kt)("li",{parentName:"ul"},"related entities.")),(0,l.kt)("p",null,"If ",(0,l.kt)("em",{parentName:"p"},"attributePath")," is invalid, an empty collection is returned."),(0,l.kt)("p",null,"This function accepts two syntaxes."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".extract( attributePath : Text { ; option : Integer } ) : Collection")),(0,l.kt)("p",null,"With this syntax, ",(0,l.kt)("inlineCode",{parentName:"p"},".extract()")," populates the returned collection with the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," values of the entity selection."),(0,l.kt)("p",null,"By default, entities for which ",(0,l.kt)("em",{parentName:"p"},"attributePath")," is ",(0,l.kt)("em",{parentName:"p"},"null")," or undefined are ignored in the resulting collection. You can pass the ",(0,l.kt)("inlineCode",{parentName:"p"},"ck keep null")," constant in the ",(0,l.kt)("em",{parentName:"p"},"option")," parameter to include these values as ",(0,l.kt)("strong",{parentName:"p"},"null")," elements in the returned collection."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Dataclass attributes with ",(0,l.kt)("a",{parentName:"li",href:"/orda/docs/API/DataClassAttributeClass#kind"},".kind"),' = "relatedEntity" are extracted as a collection of entities (duplications are kept).'),(0,l.kt)("li",{parentName:"ul"},"Dataclass attributes with ",(0,l.kt)("a",{parentName:"li",href:"/orda/docs/API/DataClassAttributeClass#kind"},".kind"),' = "relatedEntities" are extracted as a collection of entity selections.')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".extract ( attributePath ; targetPath { ; ...attributePathN ; ... targetPathN}) : Collection")),(0,l.kt)("p",null,"With this syntax, ",(0,l.kt)("inlineCode",{parentName:"p"},".extract()")," populates the returned collection with the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," properties. Each element of the returned collection is an object with ",(0,l.kt)("em",{parentName:"p"},"targetPath")," properties filled with the corresponding ",(0,l.kt)("em",{parentName:"p"},"attributePath")," properties. Null values are kept (",(0,l.kt)("em",{parentName:"p"},"option")," parameter is ignored with this syntax). "),(0,l.kt)("p",null,"If several ",(0,l.kt)("em",{parentName:"p"},"attributePath")," are given, a ",(0,l.kt)("em",{parentName:"p"},"targetPath")," must be given for each. Only valid pairs ","[",(0,l.kt)("em",{parentName:"p"},"attributePath"),", ",(0,l.kt)("em",{parentName:"p"},"targetPath"),"] are extracted."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Dataclass attributes with ",(0,l.kt)("a",{parentName:"li",href:"/orda/docs/API/DataClassAttributeClass#kind"},".kind"),' = "relatedEntity" are extracted as an entity.'),(0,l.kt)("li",{parentName:"ul"},"Dataclass attributes with ",(0,l.kt)("a",{parentName:"li",href:"/orda/docs/API/DataClassAttributeClass#kind"},".kind"),' = "relatedEntities" are extracted as an entity selection.')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Entities of a collection of entities accessed by ","["," ] are not reloaded from the database.")),(0,l.kt)("h4",{id:"example-9"},"Example"),(0,l.kt)("p",null,"Given the following table and relation:"),(0,l.kt)("p",null,(0,l.kt)("img",{src:n(2241).Z})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $firstnames; $addresses; $mailing; $teachers : Collection\n  //\n  //\n  //$firstnames is a collection of Strings\n\n\n $firstnames:=ds.Teachers.all().extract("firstname")\n  //\n  //$addresses is a collection of entities related to dataclass Address\n  //Null values for address are extracted\n $addresses:=ds.Teachers.all().extract("address";ck keep null)\n  //\n  //\n  //$mailing is a collection of objects with properties "who" and "to"\n  //"who" property content is String type \n  //"to" property content is entity type (Address dataclass)\n $mailing:=ds.Teachers.all().extract("lastname";"who";"address";"to")\n  //\n  //\n  //$mailing is a collection of objects with properties "who" and "city"\n  //"who" property content is String type \n  //"city" property content is String type \n $mailing:=ds.Teachers.all().extract("lastname";"who";"address.city";"city")\n  //\n  //$teachers is a collection of objects with properties "where" and "who"\n  //"where" property content is String\n  //"who" property content is an entity selection (Teachers dataclass)\n $teachers:=ds.Address.all().extract("city";"where";"teachers";"who")\n  //\n  //$teachers is a collection of entity selections\n $teachers:=ds.Address.all().extract("teachers")\n')),(0,l.kt)("h2",{id:"first"},".first()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".first()")," : 4D.Entity"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Reference to the first entity of the entity selection (Null if selection is empty)")))),(0,l.kt)("h4",{id:"description-12"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".first()")," function ","returns a reference to the entity in the first position of the entity selection",". "),(0,l.kt)("p",null,"The result of this function is similar to:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," $entity:=$entitySel[0]\n")),(0,l.kt)("p",null,"There is, however, a difference between both statements when the selection is empty:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $entitySel : cs.EmpSelection\n var $entity : cs.EmpEntity\n $entitySel:=ds.Emp.query("lastName = :1";"Nonexistentname") //no matching entity\n  //entity selection is then empty\n $entity:=$entitySel.first() //returns Null\n $entity:=$entitySel[0]  //generates an error\n')),(0,l.kt)("h4",{id:"example-10"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $entitySelection : cs.EmpSelection\n var $entity : cs.EmpEntity\n $entitySelection:=ds.Emp.query("salary > :1";100000)\n If($entitySelection.length#0)\n    $entity:=$entitySelection.first()\n End if\n')),(0,l.kt)("h2",{id:"getdataclass"},".getDataClass()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17 R5|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".getDataClass()")," : 4D.DataClass"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.DataClass"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Dataclass object to which the entity selection belongs")))),(0,l.kt)("h4",{id:"description-13"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".getDataClass()")," function ","returns the dataclass of the entity selection",". "),(0,l.kt)("p",null,"This function is mainly useful in the context of generic code."),(0,l.kt)("h4",{id:"example-11"},"Example"),(0,l.kt)("p",null,"The following generic code duplicates all entities of the entity selection:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},"  //duplicate_entities method\n  //duplicate_entities($entity_selection)\n \n #DECLARE ( $entitySelection : 4D.EntitySelection )  \n var $dataClass : 4D.DataClass\n var $entity; $duplicate : 4D.Entity\n var $status : Object\n $dataClass:=$entitySelection.getDataClass()\n For each($entity;$entitySelection)\n    $duplicate:=$dataClass.new()\n    $duplicate.fromObject($entity.toObject())\n    $duplicate[$dataClass.getInfo().primaryKey]:=Null //reset the primary key\n    $status:=$duplicate.save()\n End for each\n")),(0,l.kt)("h2",{id:"isalterable"},".isAlterable()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Version"),(0,l.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"v18 R5"),(0,l.kt)("td",{parentName:"tr",align:null},"Added"))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".isAlterable()")," : Boolean"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"True if the entity selection is alterable, False otherwise")))),(0,l.kt)("h4",{id:"description-14"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".isAlterable()")," function ","returns True if the entity selection is alterable",", and False if the entity selection is not alterable. "),(0,l.kt)("p",null,"For more information, please refer to ",(0,l.kt)("a",{parentName:"p",href:"ORDA/entities.md#shareable-or-alterable-entity-selections"},"Shareable or alterable entity selections"),"."),(0,l.kt)("h4",{id:"example-12"},"Example"),(0,l.kt)("p",null,"You are about to display ",(0,l.kt)("inlineCode",{parentName:"p"},"Form.products")," in a ",(0,l.kt)("a",{parentName:"p",href:"FormObjects/listbox_overview.md"},"list box")," to allow the user to add new products. You want to make sure it is alterable so that the user can add new products without error:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},"If (Not(Form.products.isAlterable()))\n    Form.products:=Form.products.copy()\nEnd if\n...\nForm.products.add(Form.product)\n")),(0,l.kt)("h2",{id:"isordered"},".isOrdered()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Version"),(0,l.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"v17"),(0,l.kt)("td",{parentName:"tr",align:null},"Added"))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".isOrdered()")," : Boolean"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"True if the entity selection is ordered, False otherwise")))),(0,l.kt)("h4",{id:"description-15"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".isOrdered()")," function ","returns True if the entity selection is ordered",", and False if it is unordered."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function always returns True when the entity selection comes from a remote datastore. ")),(0,l.kt)("p",null,"For more information, please refer to ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"Ordered or unordered entity selection"),"."),(0,l.kt)("h4",{id:"example-13"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $isOrdered : Boolean\n $employees:=ds.Employee.newSelection(dk keep ordered)\n $employee:=ds.Employee.get(714) // Gets the entity with primary key 714\n \n  //In an ordered entity selection, we can add the same entity several times (duplications are kept)\n $employees.add($employee)\n $employees.add($employee)\n $employees.add($employee)\n \n $isOrdered:=$employees.isOrdered()\n If($isOrdered)\n    ALERT("The entity selection is ordered and contains "+String($employees.length)+" employees")\n End if\n')),(0,l.kt)("h2",{id:"last"},".last()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".last()")," : 4D.Entity"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Reference to the last entity of the entity selection (Null if empty entity selection)")))),(0,l.kt)("h4",{id:"description-16"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".last()")," function ","returns a reference to the entity in last position of the entity selection",". "),(0,l.kt)("p",null,"The result of this function is similar to:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," $entity:=$entitySel[length-1]\n")),(0,l.kt)("p",null,"If the entity selection is empty, the function returns Null."),(0,l.kt)("h4",{id:"example-14"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $entitySelection : cs.EmpSelection\n var $entity : cs.EmpEntity\n $entitySelection:=ds.Emp.query("salary < :1";50000)\n If($entitySelection.length#0)\n    $entity:=$entitySelection.last()\n End if\n')),(0,l.kt)("h2",{id:"length"},".length"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".length")," : Integer"),(0,l.kt)("h4",{id:"description-17"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".length")," property ","returns the number of entities in the entity selection",". If the entity selection is empty, it returns 0."),(0,l.kt)("p",null,"Entity selections always have a ",(0,l.kt)("inlineCode",{parentName:"p"},".length")," property."),(0,l.kt)("h4",{id:"example-15"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $vSize : Integer\n $vSize:=ds.Employee.query("gender = :1";"male").length\n ALERT(String(vSize)+" male employees found.")\n')),(0,l.kt)("h2",{id:"max"},".max()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added| |v18 R6|Returns undefined if empty entity selection|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".max"),"( ",(0,l.kt)("em",{parentName:"p"},"attributePath")," : Text ) : any"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Path of the attribute to be used for calculation")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"any"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Highest value of attribute")))),(0,l.kt)("h4",{id:"description-18"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".max()")," function ","returns the highest (or maximum) value among all the values of ",(0,l.kt)("em",{parentName:"p"},"attributePath")," in the entity selection",". It actually returns the value of the last entity of the entity selection as it would be sorted in ascending order using the ",(0,l.kt)("a",{parentName:"p",href:"#orderby"},(0,l.kt)("inlineCode",{parentName:"a"},".orderBy()"))," function."),(0,l.kt)("p",null,"If you pass in ",(0,l.kt)("em",{parentName:"p"},"attributePath")," a path to an object property containing different types of values, the ",(0,l.kt)("inlineCode",{parentName:"p"},".max()")," function will return the maximum value within the first scalar type in the default 4D type list order (see ",(0,l.kt)("a",{parentName:"p",href:"CollectionClass.md#sort"},(0,l.kt)("inlineCode",{parentName:"a"},".sort()"))," description). "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".max()")," returns ",(0,l.kt)("strong",{parentName:"p"},"undefined")," if the entity selection is empty or ",(0,l.kt)("em",{parentName:"p"},"attributePath")," is not found in the object attribute."),(0,l.kt)("p",null,"An error is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is a related attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," designates an attribute that does not exist in the entity selection dataclass.")),(0,l.kt)("h4",{id:"example-16"},"Example"),(0,l.kt)("p",null,"We want to find the highest salary among all the female employees:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $sel : cs.EmpSelection\n var $maxSalary : Real\n $sel:=ds.Employee.query("gender = :1";"female")\n $maxSalary:=$sel.max("salary")\n')),(0,l.kt)("h2",{id:"min"},".min()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added| |v18 R6|Returns undefined if empty entity selection|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".min"),"( ",(0,l.kt)("em",{parentName:"p"},"attributePath")," : Text ) : any"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Path of the attribute to be used for calculation")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"any"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Lowest value of attribute")))),(0,l.kt)("h4",{id:"description-19"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".min()")," function "," returns the lowest (or minimum) value among all the values of attributePath in the entity selection",".  It actually returns the first entity of the entity selection as it would be sorted in ascending order using the ",(0,l.kt)("a",{parentName:"p",href:"#orderby"},(0,l.kt)("inlineCode",{parentName:"a"},".orderBy()"))," function (excluding ",(0,l.kt)("strong",{parentName:"p"},"null")," values)."),(0,l.kt)("p",null,"If you pass in ",(0,l.kt)("em",{parentName:"p"},"attributePath")," a path to an object property containing different types of values, the ",(0,l.kt)("inlineCode",{parentName:"p"},".min()")," function will return the minimum value within the first scalar value type in the type list order (see ",(0,l.kt)("a",{parentName:"p",href:"CollectionClass.md#sort"},(0,l.kt)("inlineCode",{parentName:"a"},".sort()"))," description)."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".min()")," returns ",(0,l.kt)("strong",{parentName:"p"},"undefined")," if the entity selection is empty or ",(0,l.kt)("em",{parentName:"p"},"attributePath")," is not found in the object attribute."),(0,l.kt)("p",null,"An error is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is a related attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," designates an attribute that does not exist in the entity selection dataclass.")),(0,l.kt)("h4",{id:"example-17"},"Example"),(0,l.kt)("p",null,"In this example, we want to find the lowest salary among all the female employees:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $sel : cs.EmpSelection\n var $minSalary : Real\n $sel:=ds.Employee.query("gender = :1";"female")\n $minSalary:=$sel.min("salary")\n')),(0,l.kt)("h2",{id:"minus"},".minus()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".minus"),"( ",(0,l.kt)("em",{parentName:"p"},"entity")," : 4D.Entity ) : 4D.EntitySelection",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".minus"),"( ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entity"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity to substract")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entitySelection"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity selection to substract")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New entity selection or a new reference on the existing entity selection")))),(0,l.kt)("h4",{id:"description-20"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".minus()")," function ","excludes from the entity selection to which it is applied the ",(0,l.kt)("em",{parentName:"p"},"entity")," or the entities of ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," and returns the resulting entity selection","."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you pass ",(0,l.kt)("em",{parentName:"li"},"entity")," as parameter, the function creates a new entity selection without ",(0,l.kt)("em",{parentName:"li"},"entity")," (if ",(0,l.kt)("em",{parentName:"li"},"entity")," belongs to the entity selection). If ",(0,l.kt)("em",{parentName:"li"},"entity")," was not included in the original entity selection, a new reference to the entity selection is returned."),(0,l.kt)("li",{parentName:"ul"},"If you pass ",(0,l.kt)("em",{parentName:"li"},"entitySelection")," as parameter, the function returns an entity selection containing the entities belonging to the original entity selection without the entities belonging to ",(0,l.kt)("em",{parentName:"li"},"entitySelection"),". ")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"You can compare ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"ordered and/or unordered entity selections"),". The resulting selection is always unordered.")),(0,l.kt)("p",null,"If the original entity selection or both the original entity selection and the ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," parameter are empty, an empty entity selection is returned."),(0,l.kt)("p",null,"If ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," is empty or if ",(0,l.kt)("em",{parentName:"p"},"entity")," is Null, a new reference to the original entity selection is returned."),(0,l.kt)("p",null,"If the original entity selection and the parameter are not related to the same dataclass, an error is raised."),(0,l.kt)("h4",{id:"example-1-4"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees; $result : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n \n $employees:=ds.Employee.query("lastName = :1";"H@") \n  // The $employees entity selection contains the entity with primary key 710 and other entities\n  // for ex. "Colin Hetrick", "Grady Harness", "Sherlock Holmes" (primary key 710)\n \n $employee:=ds.Employee.get(710) // Returns "Sherlock Holmes"\n \n $result:=$employees.minus($employee) //$result contains "Colin Hetrick", "Grady Harness"\n')),(0,l.kt)("h4",{id:"example-2-3"},"Example 2"),(0,l.kt)("p",null,'We want to have a selection of female employees named "Jones" who live in New York :'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $sel1; $sel2; $sel3 : cs.EmployeeSelection\n $sel1:=ds.Employee.query("name =:1";"Jones")\n $sel2:=ds.Employee.query("city=:1";"New York")\n $sel3:=$sel1.and($sel2).minus(ds.Employee.query("gender=\'male\'"))\n')),(0,l.kt)("h2",{id:"or"},".or()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".or"),"( ",(0,l.kt)("em",{parentName:"p"},"entity")," : 4D.Entity ) : 4D.EntitySelection",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".or"),"( ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entity"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.Entity"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity to intersect with")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"entitySelection"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity selection to intersect with")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New entity selection or new reference to the original entity selection")))),(0,l.kt)("h4",{id:"description-21"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".or()")," function ","combines the entity selection with the ",(0,l.kt)("em",{parentName:"p"},"entity")," or ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," parameter using the logical (not exclusive) OR operator","; it returns a new, unordered entity selection that contains all the entities from the entity selection and the parameter."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you pass ",(0,l.kt)("em",{parentName:"li"},"entity")," as parameter, you compare this entity with the entity selection. If the entity belongs to the entity selection, a new reference to the entity selection is returned. Otherwise, a new entity selection containing the original entity selection and the entity is returned."),(0,l.kt)("li",{parentName:"ul"},"If you pass ",(0,l.kt)("em",{parentName:"li"},"entitySelection")," as parameter, you compare entity selections. A new entity selection containing the entities belonging to the original entity selection or ",(0,l.kt)("em",{parentName:"li"},"entitySelection")," is returned (or is not exclusive, entities referenced in both selections are not duplicated in the resulting selection).")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"You can compare ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"ordered and/or unordered entity selections"),". The resulting selection is always unordered.")),(0,l.kt)("p",null,"If the original entity selection and the ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," parameter are empty, an empty entity selection is returned. If the original entity selection is empty, a reference to ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," or an entity selection containing only ",(0,l.kt)("em",{parentName:"p"},"entity")," is returned."),(0,l.kt)("p",null,"If ",(0,l.kt)("em",{parentName:"p"},"entitySelection")," is empty or if ",(0,l.kt)("em",{parentName:"p"},"entity")," is Null, a new reference to the original entity selection is returned."),(0,l.kt)("p",null,"If the original entity selection and the parameter are not related to the same dataclass, an error is raised."),(0,l.kt)("h4",{id:"example-1-5"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees1; $employees2; $result : cs.EmployeeSelection\n $employees1:=ds.Employee.query("lastName = :1";"H@") //Returns "Colin Hetrick","Grady Harness"\n $employees2:=ds.Employee.query("firstName = :1";"C@") //Returns "Colin Hetrick", "Cath Kidston"\n $result:=$employees1.or($employees2) //$result contains "Colin Hetrick", "Grady Harness","Cath Kidston"\n')),(0,l.kt)("h4",{id:"example-2-4"},"Example 2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employees; $result : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") // Returns "Colin Hetrick","Grady Harness", "Sherlock Holmes"\n $employee:=ds.Employee.get(686) //the entity with primary key 686 does not belong to the $employees entity selection\n  //It matches the employee "Mary Smith"\n \n $result:=$employees.or($employee) //$result contains "Colin Hetrick", "Grady Harness", "Sherlock Holmes", "Mary Smith"\n')),(0,l.kt)("h2",{id:"orderby"},".orderBy()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".orderBy"),"( ",(0,l.kt)("em",{parentName:"p"},"pathString")," : Text ) : 4D.EntitySelection",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".orderBy"),"( ",(0,l.kt)("em",{parentName:"p"},"pathObjects")," : Collection ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pathString"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Attribute path(s) and sorting instruction(s) for the entity selection")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pathObjects"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection of criteria objects")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New entity selection in the specified order")))),(0,l.kt)("h4",{id:"description-22"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".orderBy()")," function ","returns a new ordered entity selection containing all entities of the entity selection in the order specified by ",(0,l.kt)("em",{parentName:"p"},"pathString")," or ",(0,l.kt)("em",{parentName:"p"},"pathObjects")," criteria",". "),(0,l.kt)("blockquote",null,(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"This method does not modify the original entity selection."),(0,l.kt)("li",{parentName:"ul"},"For more information, please refer to the ",(0,l.kt)("a",{parentName:"li",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"Ordered or unordered entity selection")," section."))),(0,l.kt)("p",null,"You must use a criteria parameter to define how the entities must be sorted. Two different parameters are supported:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"pathString")," (Text) : This parameter contains a formula made of 1 to x attribute paths and (optionally) sort orders, separated by commas. The syntax is:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'"attributePath1 {desc or asc}, attributePath2 {desc or asc},..."\n')),(0,l.kt)("p",null,'The order in which the attributes are passed determines the sorting priority of the entities. By default, attributes are sorted in ascending order. You can set the sort order of a property in the criteria string, separated from the property path by a single space: pass "asc" to sort in ascending order or "desc" in descending order.'),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"pathObjects")," (collection): each element of the collection contains an object structured in the following way:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'{\n    "propertyPath": string,\n    "descending": boolean\n}\n')),(0,l.kt)("p",null,'By default, attributes are sorted in ascending order ("descending" is false).'),(0,l.kt)("p",null,"You can add as many objects in the criteria collection as necessary."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Null values are evaluated as less than other values.")),(0,l.kt)("h4",{id:"example-18"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'// order by formula\n $sortedEntitySelection:=$entitySelection.orderBy("firstName asc, salary desc")\n $sortedEntitySelection:=$entitySelection.orderBy("firstName")\n \n  // order by collection with or without sort orders\n $orderColl:=New collection\n $orderColl.push(New object("propertyPath";"firstName";"descending";False))\n $orderColl.push(New object("propertyPath";"salary";"descending";True))\n $sortedEntitySelection:=$entitySelection.orderBy($orderColl)\n \n $orderColl:=New collection\n $orderColl.push(New object("propertyPath";"manager.lastName"))\n $orderColl.push(New object("propertyPath";"salary"))\n $sortedEntitySelection:=$entitySelection.orderBy($orderColl)\n')),(0,l.kt)("h2",{id:"orderbyformula-"},".orderByFormula( )"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17 R6|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".orderByFormula"),"( ",(0,l.kt)("em",{parentName:"p"},"formulaString")," : Text { ; ",(0,l.kt)("em",{parentName:"p"},"sortOrder")," : Integer } { ; ",(0,l.kt)("em",{parentName:"p"},"settings")," : Object} ) : 4D.EntitySelection",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".orderByFormula"),"( ",(0,l.kt)("em",{parentName:"p"},"formulaObj")," : Object { ; ",(0,l.kt)("em",{parentName:"p"},"sortOrder")," : Integer } { ; ",(0,l.kt)("em",{parentName:"p"},"settings")," : Object} ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"formulaString"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Formula string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"formulaObj"),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Formula object")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sortOrder"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"dk ascending")," (default) or ",(0,l.kt)("inlineCode",{parentName:"td"},"dk descending"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"settings"),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Parameter(s) for the formula")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New ordered entity selection")))),(0,l.kt)("h4",{id:"description-23"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".orderByFormula()")," function ","returns a new, ordered entity selection"," containing all entities of the entity selection in the order defined through the ",(0,l.kt)("em",{parentName:"p"},"formulaString")," or ",(0,l.kt)("em",{parentName:"p"},"formulaObj")," and, optionally, ",(0,l.kt)("em",{parentName:"p"},"sortOrder")," and ",(0,l.kt)("em",{parentName:"p"},"settings")," parameters."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function does not modify the original entity selection.")),(0,l.kt)("p",null,"You can use either a ",(0,l.kt)("em",{parentName:"p"},"formulaString")," or a ",(0,l.kt)("em",{parentName:"p"},"formulaObj")," parameter:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"formulaString"),': you pass a 4D expression such as "Year of(this.birthDate)".'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"formulaObj"),": pass a valid formula object created using the ",(0,l.kt)("inlineCode",{parentName:"li"},"Formula")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"Formula from string")," command.")),(0,l.kt)("p",null,"The ",(0,l.kt)("em",{parentName:"p"},"formulaString")," or ",(0,l.kt)("em",{parentName:"p"},"formulaObj")," is executed for each entity of the entity selection and its result is used to define the position of the entity in the returned entity selection. The result must be of a sortable type (boolean, date, number, text, time, null)."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A null result is always the smallest value.")),(0,l.kt)("p",null,"By default if you omit the ",(0,l.kt)("em",{parentName:"p"},"sortOrder")," parameter, the resulting entity selection is sorted in ascending order. Optionnally, you can pass one of the following values in the ",(0,l.kt)("em",{parentName:"p"},"sortOrder")," parameter:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Constant"),(0,l.kt)("th",{parentName:"tr",align:null},"Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Comment"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"dk ascending"),(0,l.kt)("td",{parentName:"tr",align:null},"0"),(0,l.kt)("td",{parentName:"tr",align:null},"Ascending sort order (default)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"dk descending"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"Descending sort order")))),(0,l.kt)("p",null,"Within the ",(0,l.kt)("em",{parentName:"p"},"formulaString")," or ",(0,l.kt)("em",{parentName:"p"},"formulaObj"),", the processed entity and thus its attributes are available through the ",(0,l.kt)("inlineCode",{parentName:"p"},"This")," command (for example, ",(0,l.kt)("inlineCode",{parentName:"p"},"This.lastName"),"). "),(0,l.kt)("p",null,"You can pass parameter(s) to the formula using the ",(0,l.kt)("inlineCode",{parentName:"p"},"args")," property (object) of the ",(0,l.kt)("inlineCode",{parentName:"p"},"settings")," parameter: the formula receives the ",(0,l.kt)("inlineCode",{parentName:"p"},"settings.args")," object in $1."),(0,l.kt)("h4",{id:"example-1-6"},"Example 1"),(0,l.kt)("p",null,"Sorting students using a formula provided as text:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $es1; $es2 : cs.StudentsSelection\n $es1:=ds.Students.query("nationality=:1";"French")\n $es2:=$es1.orderByFormula("length(this.lastname)") //ascending by default\n $es2:=$es1.orderByFormula("length(this.lastname)";dk descending)\n')),(0,l.kt)("p",null,"Same sort order but using a formula object:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $es1; $es2 : cs.StudentsSelection\n var $formula : Object\n $es1:=ds.Students.query("nationality=:1";"French")\n $formula:=Formula(Length(This.lastname))\n $es2:=$es1.orderByFormula($formula) // ascending by default\n $es2:=$es1.orderByFormula($formula;dk descending)\n')),(0,l.kt)("h4",{id:"example-2-5"},"Example 2"),(0,l.kt)("p",null,"A formula is given as a formula object with parameters; ",(0,l.kt)("inlineCode",{parentName:"p"},"settings.args")," object is received as $1 in the ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"computeAverage"))," method. "),(0,l.kt)("p",null,'In this example, the "marks" object field in the ',(0,l.kt)("strong",{parentName:"p"},"Students")," dataClass contains students' grades for each subject. A single formula object is used to compute a student's average grade with different coefficients for schoolA and schoolB."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $es1; $es2 : cs.StudentsSelection\n var $formula; $schoolA; $schoolB : Object\n $es1:=ds.Students.query("nationality=:1";"French")\n $formula:=Formula(computeAverage($1))\n \n $schoolA:=New object() //settings object\n $schoolA.args:=New object("english";1;"math";1;"history";1) // Coefficients to compute an average\n \n  //Order students according to school A criteria\n $es2:=$es1.entitySelection.orderByFormula($formula;$schoolA)\n \n $schoolB:=New object() //settings object\n $schoolB.args:=New object("english";1;"math";2;"history";3) // Coefficients to compute an average\n \n  //Order students according to school B criteria\n $es2:=$es1.entitySelection.orderByFormula($formula;dk descending;$schoolB)\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},"  //\n  // computeAverage method\n  // -----------------------------\n #DECLARE ($coefList : Object) -> $result : Integer\n var $subject : Text\n var $average; $sum : Integer\n \n $average:=0\n $sum:=0\n \n For each($subject;$coefList)\n    $sum:=$sum+$coefList[$subject]\n End for each\n \n For each($subject;This.marks)\n    $average:=$average+(This.marks[$subject]*$coefList[$subject])\n End for each\n \n $result:=$average/$sum\n")),(0,l.kt)("h2",{id:"query"},".query()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17 R6|Support of Formula parameters| |v17 R5|Support of placeholders for values| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".query"),"( ",(0,l.kt)("em",{parentName:"p"},"queryString")," : Text { ; ",(0,l.kt)("em",{parentName:"p"},"...value")," : any } { ; ",(0,l.kt)("em",{parentName:"p"},"querySettings")," : Object } ) : 4D.EntitySelection ",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".query"),"( ",(0,l.kt)("em",{parentName:"p"},"formula")," : Object { ; ",(0,l.kt)("em",{parentName:"p"},"querySettings")," : Object } ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"queryString"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Search criteria as string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"formula"),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Search criteria as formula object")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"value"),(0,l.kt)("td",{parentName:"tr",align:null},"any"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Value(s) to use for indexed placeholder(s)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"querySettings"),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Query options: parameters, attributes, args, allowFormulas, context, queryPath, queryPlan")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New entity selection made up of entities from entity selection meeting the search criteria specified in ",(0,l.kt)("em",{parentName:"td"},"queryString")," or ",(0,l.kt)("em",{parentName:"td"},"formula"))))),(0,l.kt)("h4",{id:"description-24"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".query()")," function ","searches for entities that meet the search criteria specified in ",(0,l.kt)("em",{parentName:"p"},"queryString")," or ",(0,l.kt)("em",{parentName:"p"},"formula")," and (optionally) ",(0,l.kt)("em",{parentName:"p"},"value"),"(s) among all the entities in the entity selection",", and returns a new object of type ",(0,l.kt)("inlineCode",{parentName:"p"},"EntitySelection")," containing all the entities that are found. Lazy loading is applied."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function does not modify the original entity selection.")),(0,l.kt)("p",null,"If no matching entities are found, an empty ",(0,l.kt)("inlineCode",{parentName:"p"},"EntitySelection")," is returned."),(0,l.kt)("p",null,"For detailed information on how to build a query using ",(0,l.kt)("em",{parentName:"p"},"queryString"),", ",(0,l.kt)("em",{parentName:"p"},"value"),", and ",(0,l.kt)("em",{parentName:"p"},"querySettings")," parameters, please refer to the DataClass ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," function description."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"By default if you omit the ",(0,l.kt)("strong",{parentName:"p"},"order by")," statement in the ",(0,l.kt)("em",{parentName:"p"},"queryString"),", the returned entity selection is ",(0,l.kt)("a",{parentName:"p",href:"ORDA/dsMapping.md#ordered-or-unordered-entity-selection"},"not ordered"),". Note however that, in Client/Server mode, it behaves like an ordered entity selection (entities are added at the end of the selection). ")),(0,l.kt)("h4",{id:"example-1-7"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $entitySelectionTemp : cs.EmployeeSelection\n $entitySelectionTemp:=ds.Employee.query("lastName = :1";"M@")\n Form.emps:=$entitySelectionTemp.query("manager.lastName = :1";"S@")\n')),(0,l.kt)("h4",{id:"example-2-6"},"Example 2"),(0,l.kt)("p",null,"More examples of queries can be found in the DataClass ",(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," page. "),(0,l.kt)("h4",{id:"see-also-1"},"See also"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassClass#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," for dataclass"),(0,l.kt)("h2",{id:"querypath"},".queryPath"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".queryPath")," : Text"),(0,l.kt)("h4",{id:"description-25"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".queryPath")," property ","contains a detailed description of the query as it was actually performed by 4D",". This property is available for ",(0,l.kt)("inlineCode",{parentName:"p"},"EntitySelection")," objects generated through queries if the ",(0,l.kt)("inlineCode",{parentName:"p"},'"queryPath":true')," property was passed in the ",(0,l.kt)("em",{parentName:"p"},"querySettings")," parameter of the ",(0,l.kt)("a",{parentName:"p",href:"#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," function."),(0,l.kt)("p",null,"For more information, refer to the ",(0,l.kt)("strong",{parentName:"p"},"querySettings parameter")," paragraph in the Dataclass",(0,l.kt)("a",{parentName:"p",href:"DataClassClass.html#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," page. "),(0,l.kt)("h2",{id:"queryplan"},".queryPlan"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".queryPlan")," : Text"),(0,l.kt)("h4",{id:"description-26"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".queryPlan")," property "," contains a detailed description of the query just before it is executed (i.e., the planned query)",". This property is available for ",(0,l.kt)("inlineCode",{parentName:"p"},"EntitySelection")," objects generated through queries if the ",(0,l.kt)("inlineCode",{parentName:"p"},'"queryPlan":true')," property was passed in the ",(0,l.kt)("em",{parentName:"p"},"querySettings")," parameter of the ",(0,l.kt)("a",{parentName:"p",href:"#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," function."),(0,l.kt)("p",null,"For more information, refer to the ",(0,l.kt)("strong",{parentName:"p"},"querySettings parameter")," paragraph in the Dataclass",(0,l.kt)("a",{parentName:"p",href:"DataClassClass.html#query"},(0,l.kt)("inlineCode",{parentName:"a"},".query()"))," page. "),(0,l.kt)("h2",{id:"refresh"},".refresh()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v18 R3|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".refresh()")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:"center"}),(0,l.kt)("td",{parentName:"tr",align:null},"Does not require any parameters")))),(0,l.kt)("h4",{id:"description-27"},"Description"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function only works with a remote datastore (client / server or ",(0,l.kt)("inlineCode",{parentName:"p"},"Open datastore")," connection).")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".refresh()")," function ",'immediately "invalidates" the entity selection data in the local ORDA cache'," so that the next time 4D requires the entity selection, it will be reloaded from the database."),(0,l.kt)("p",null,"By default, the local ORDA cache is invalidated after 30 seconds. In the context of client / server applications using both ORDA and the classic language, this method allows you to make sure a remote application will always work with the latest data."),(0,l.kt)("h4",{id:"example-1-8"},"Example 1"),(0,l.kt)("p",null,"In this example, classic and ORDA code modify the same data simultaneously:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' //On a 4D remote\n \n var $selection : cs.StudentsSelection\n var $student : cs.StudentsEntity\n \n $selection:=ds.Students.query("lastname=:1";"Collins")\n  //The first entity is loaded in the ORDA cache\n $student:=$selection.first()\n \n  //Update with classic 4D, ORDA cache is not aware of if\n QUERY([Students];[Students]lastname="Collins")\n [Students]lastname:="Colin"\n SAVE RECORD([Students])\n \n  //to get the latest version, the ORDA cache must be invalidated\n $selection.refresh()\n  // Even if cache is not expired, the first entity is reloaded from disk\n $student:=$selection.first()\n \n  //$student.lastname contains "Colin"\n')),(0,l.kt)("h4",{id:"example-2-7"},"Example 2"),(0,l.kt)("p",null,"A list box displays the Form.students entity selection and several clients work on it. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},"// Form method:\n Case of\n    :(Form event code=On Load)\n       Form.students:=ds.Students.all()\n End case\n  //\n  //\n  // On client #1, the user loads, updates, and saves the first entity\n  // On client #2, the user loads, updates, and saves the same entity\n  //\n  //\n  // On client #1:\n Form.students.refresh() // Invalidates the ORDA cache for the Form.students entity selection\n  // The list box content is refreshed from the database with update made by client #2\n")),(0,l.kt)("h2",{id:"selected"},".selected()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v19 R3|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".selected"),"( ",(0,l.kt)("em",{parentName:"p"},"selectedEntities")," : 4D.EntitySelection ) : Object"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"selectedEntities"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Entity selection with entities for which to know the rank in the entity selection")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Range(s) of selected entities in entity selection")))),(0,l.kt)("h4",{id:"description-28"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".selected()")," function ","returns an object describing the position(s) of ",(0,l.kt)("em",{parentName:"p"},"selectedEntities")," in the original entity selection",". "),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function does not modify the original entity selection.")),(0,l.kt)("p",null,"Pass in the ",(0,l.kt)("em",{parentName:"p"},"selectedEntities")," parameter an entity selection containing entities for which you want to know the position in the original entity selection. ",(0,l.kt)("em",{parentName:"p"},"selectedEntities"),' must be an entity selection belonging to the same dataclass as the original entity selection, otherwise an error 1587 - "The entity selection comes from an incompatible dataclass" is raised. '),(0,l.kt)("h4",{id:"result"},"Result"),(0,l.kt)("p",null,"The returned object contains the following properties:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ranges"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection of range objects")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ranges[].start"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null},"First entity index in the range")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ranges[].end"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null},"Last entity index in the range")))),(0,l.kt)("p",null,"If a ",(0,l.kt)("inlineCode",{parentName:"p"},"ranges")," property contains a single entity, ",(0,l.kt)("inlineCode",{parentName:"p"},"start")," = ",(0,l.kt)("inlineCode",{parentName:"p"},"end"),". Index starts at 0."),(0,l.kt)("p",null,"The function returns an empty collection in the ",(0,l.kt)("inlineCode",{parentName:"p"},"ranges")," property if the original entity selection or the ",(0,l.kt)("em",{parentName:"p"},"selectedEntities")," entity selection is empty."),(0,l.kt)("h4",{id:"example-19"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $invoices; $cashSel; $creditSel : cs.Invoices\nvar $result1; $result2 : Object\n\n$invoices:=ds.Invoices.all()\n\n$cashSelection:=ds.Invoices.query("payment = :1"; "Cash")\n$creditSel:=ds.Invoices.query("payment IN :1"; New collection("Cash"; "Credit Card"))\n\n$result1:=$invoices.selected($cashSelection)\n$result2:=$invoices.selected($creditSel)\n\n//$result1 = {ranges:[{start:0;end:0},{start:3;end:3},{start:6;end:6}]}\n//$result2 = {ranges:[{start:0;end:1},{start:3;end:4},{start:6;end:7}]}\n\n')),(0,l.kt)("h2",{id:"slice"},".slice()"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".slice"),"( ",(0,l.kt)("em",{parentName:"p"},"startFrom")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"end")," : Integer } ) : 4D.EntitySelection"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"startFrom"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Index to start the operation at (included)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"end"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"End index (not included)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"4D.EntitySelection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"New entity selection containing sliced entities (shallow copy)")))),(0,l.kt)("h4",{id:"description-29"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".slice()")," function ","returns a portion of an entity selection into a new entity selection",", selected from the ",(0,l.kt)("em",{parentName:"p"},"startFrom")," index to the ",(0,l.kt)("em",{parentName:"p"},"end")," index (",(0,l.kt)("em",{parentName:"p"},"end")," is not included) or to the last entity of the entity selection. This method returns a shallow copy of the entity selection (it uses the same entity references)."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"This function does not modify the original entity selection.")),(0,l.kt)("p",null,"The returned entity selection contains the entities specified by ",(0,l.kt)("em",{parentName:"p"},"startFrom")," and all subsequent entities up to, but not including, the entity specified by ",(0,l.kt)("em",{parentName:"p"},"end"),". If only the ",(0,l.kt)("em",{parentName:"p"},"startFrom")," parameter is specified, the returned entity selection contains all entities from ",(0,l.kt)("em",{parentName:"p"},"startFrom")," to the last entity of the original entity selection."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"startFrom")," < 0, it is recalculated as ",(0,l.kt)("em",{parentName:"li"},"startFrom:=startFrom+length")," (it is considered as the offset from the end of the entity selection). If the calculated value < 0, ",(0,l.kt)("em",{parentName:"li"},"startFrom")," is set to 0."),(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"startFrom >= length"),", the function returns an empty entity selection."),(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"end")," < 0, it is recalculated as ",(0,l.kt)("em",{parentName:"li"},"end:=end+length"),"."),(0,l.kt)("li",{parentName:"ul"},"If ",(0,l.kt)("em",{parentName:"li"},"end < startFrom")," (passed or calculated values), the method does nothing. ")),(0,l.kt)("p",null,"If the entity selection contains entities that were dropped in the meantime, they are also returned. "),(0,l.kt)("h4",{id:"example-1-9"},"Example 1"),(0,l.kt)("p",null,"You want to get a selection of the first 9 entities of the entity selection:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $sel; $sliced : cs.EmployeeSelection\n$sel:=ds.Employee.query("salary > :1";50000)\n$sliced:=$sel.slice(0;9) //\n')),(0,l.kt)("h4",{id:"example-2-8"},"Example 2"),(0,l.kt)("p",null,"Assuming we have ds.Employee.all().length = 10"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},"var $slice : cs.EmployeeSelection\n$slice:=ds.Employee.all().slice(-1;-2) //tries to return entities from index 9 to 8, but since 9 > 8, returns an empty entity selection\n\n")),(0,l.kt)("h2",{id:"sum-"},".sum( )"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".sum"),"( ",(0,l.kt)("em",{parentName:"p"},"attributePath")," : Text ) : Real"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"attributePath"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Path of the attribute to be used for calculation")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Real"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Sum of entity selection values")))),(0,l.kt)("h4",{id:"description-30"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".sum()")," function ","returns the sum for all ",(0,l.kt)("em",{parentName:"p"},"attributePath")," values in the entity selection","."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".sum()")," returns 0 if the entity selection is empty."),(0,l.kt)("p",null,"The sum can only be done on values of number type. If the ",(0,l.kt)("em",{parentName:"p"},"attributePath")," is an object property, only numerical values are taken into account for the calculation (other value types are ignored). In this case, if ",(0,l.kt)("em",{parentName:"p"},"attributePath")," leads to a property that does not exist in the object or does not contain any numeric values, ",(0,l.kt)("inlineCode",{parentName:"p"},".sum()")," returns 0."),(0,l.kt)("p",null,"An error is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is not a numerical or an object attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is a related attribute,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"attributePath")," is not found in the entity selection dataclass.")),(0,l.kt)("h4",{id:"example-20"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $sel : cs.EmployeeSelection\nvar $sum : Real\n \n$sel:=ds.Employee.query("salary < :1";20000)\n$sum:=$sel.sum("salary")\n')),(0,l.kt)("h2",{id:"tocollection-"},".toCollection( )"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"History"),"|Version|Changes| |---|---| |v17|Added|"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},".toCollection"),"( { ",(0,l.kt)("em",{parentName:"p"},"options")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"begin")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"howMany")," : Integer } } ) : ",(0,l.kt)("em",{parentName:"p"},"Collection"),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".toCollection"),"( ",(0,l.kt)("em",{parentName:"p"},"filterString")," : Text {; ",(0,l.kt)("em",{parentName:"p"},"options")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"begin")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"howMany")," : Integer }}} ) : ",(0,l.kt)("em",{parentName:"p"},"Collection"),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"p"},".toCollection"),"( ",(0,l.kt)("em",{parentName:"p"},"filterCol")," : Collection {; ",(0,l.kt)("em",{parentName:"p"},"options")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"begin")," : Integer { ; ",(0,l.kt)("em",{parentName:"p"},"howMany")," : Integer }}} ) : ",(0,l.kt)("em",{parentName:"p"},"Collection")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:"center"}),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"filterString"),(0,l.kt)("td",{parentName:"tr",align:null},"Text"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"String with entity attribute path(s) to extract")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"filterCol"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection of entity attribute path(s) to extract")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"options"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"dk with primary key"),": adds the primary key",(0,l.kt)("br",null),(0,l.kt)("inlineCode",{parentName:"td"},"dk with stamp"),": adds the stamp")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"begin"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Designates the starting index")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"howMany"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:"center"},"->"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of entities to extract")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Result"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection"),(0,l.kt)("td",{parentName:"tr",align:"center"},"<-"),(0,l.kt)("td",{parentName:"tr",align:null},"Collection of objects containing attributes and values of entity selection")))),(0,l.kt)("h4",{id:"description-31"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".toCollection()")," function ","creates and returns a collection where each element is an object containing a set of properties and values ","corresponding to the attribute names and values for the entity selection."),(0,l.kt)("p",null,'If no filter parameter is passed or the first parameter contains an empty string or "*", all the attributes are extracted. Attributes with ',(0,l.kt)("a",{parentName:"p",href:"/orda/docs/API/DataClassAttributeClass#kind"},"kind"),' property as "relatedEntity" are extracted with the simple form: an object with property ',"_","_",'KEY (primary key). Attributes with kind property as "relatedEntities" are not extracted.'),(0,l.kt)("p",null,"Or, you can designate the entity attributes to extract using a filter parameter. You can use one of these two filters:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"filterString"),' --a string with property paths separated with commas: "propertyPath1, propertyPath2, ...".'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"filterCol")," --a collection of strings containing property paths: ","[",'"propertyPath1","propertyPath2",...]')),(0,l.kt)("p",null,"If a filter is specified for an attribute of the ",(0,l.kt)("inlineCode",{parentName:"p"},"relatedEntity")," kind:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity" -> it is extracted with simple form'),(0,l.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.*" -> all the properties are extracted'),(0,l.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.propertyName1, relatedEntity.propertyName2, ..." -> only those properties are extracted')),(0,l.kt)("p",null,"If a filter is specified for an attribute of the ",(0,l.kt)("inlineCode",{parentName:"p"},"relatedEntities")," kind:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.*" -> all the properties are extracted'),(0,l.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.propertyName1, relatedEntities.propertyName2, ..." -> only those properties are extracted')),(0,l.kt)("p",null,"In the ",(0,l.kt)("em",{parentName:"p"},"options")," parameter, you can pass the ",(0,l.kt)("inlineCode",{parentName:"p"},"dk with primary key")," and/or ",(0,l.kt)("inlineCode",{parentName:"p"},"dk with stamp")," selector(s) to add the entity's primary keys and/or stamps in extracted objects."),(0,l.kt)("p",null,"The ",(0,l.kt)("em",{parentName:"p"},"begin")," parameter allows you to indicate the starting index of the entities to extract. You can pass any value between 0 and entity selection length-1."),(0,l.kt)("p",null,"The ",(0,l.kt)("em",{parentName:"p"},"howMany")," parameter lets you specify the number of entities to extract, starting with the one specified in ",(0,l.kt)("em",{parentName:"p"},"begin"),". Dropped entities are not returned but are taken into account according to ",(0,l.kt)("em",{parentName:"p"},"howMany"),". For example, if ",(0,l.kt)("em",{parentName:"p"},"howMany"),"= 3 and there is 1 dropped entity, only 2 entities are extracted."),(0,l.kt)("p",null,"If ",(0,l.kt)("em",{parentName:"p"},"howMany")," > length of the entity selection, the method returns (length - ",(0,l.kt)("em",{parentName:"p"},"begin"),") objects."),(0,l.kt)("p",null,"An empty collection is returned if:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"the entity selection is empty, or"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"begin")," is greater than the length of the entity selection.")),(0,l.kt)("h4",{id:"example-1-10"},"Example 1"),(0,l.kt)("p",null,"The following structure will be used throughout all examples of this section:"),(0,l.kt)("p",null,(0,l.kt)("img",{src:n(5194).Z})),(0,l.kt)("p",null,"Example without filter or options parameter:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"}," var $employeesCollection : Collection\n var $employees : cs.EmployeeSelection\n \n $employeesCollection:=New collection\n $employees:=ds.Employee.all()\n $employeesCollection:=$employees.toCollection()\n")),(0,l.kt)("p",null,"Returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "ID": 416,\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n        "salary": 79100,\n        "birthDate": "1963-02-01T00:00:00.000Z",\n        "woman": false,\n        "managerID": 412,\n        "employerID": 20,\n        "photo": "[object Picture]",\n        "extra": null,\n        "employer": {\n            "__KEY": 20\n        },\n        "manager": {\n            "__KEY": 412\n\n        }\n    },\n    {\n        "ID": 417,\n        "firstName": "Irma",\n        "lastName": "Durham",\n        "salary": 47000,\n        "birthDate": "1992-06-16T00:00:00.000Z",\n        "woman": true,\n        "managerID": 412,\n        "employerID": 20,\n        "photo": "[object Picture]",\n        "extra": null,\n        "employer": {\n            "__KEY": 20\n        },\n        "manager": {\n            "__KEY": 412\n        }\n    }\n]\n')),(0,l.kt)("h4",{id:"example-2-9"},"Example 2"),(0,l.kt)("p",null,"Example with options:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection : Collection\nvar $employees : cs.EmployeeSelection\n\n$employeesCollection:=New collection\n$employees:=ds.Employee.all()\n$employeesCollection:=$employees.toCollection("";dk with primary key+dk with stamp)\n')),(0,l.kt)("p",null,"Returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "__KEY": 416,\n        "__STAMP": 1,\n        "ID": 416,\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n        "salary": 79100,\n        "birthDate": "1963-02-01T00:00:00.000Z",\n        "woman": false,\n        "managerID": 412,\n        "employerID": 20,\n        "photo": "[object Picture]",\n        "extra": null,\n        "employer": {\n            "__KEY": 20\n        },\n        "manager": {\n            "__KEY": 412\n        }\n    },\n    {\n        "__KEY": 417,\n        "__STAMP": 1,\n        "ID": 417,\n        "firstName": "Irma",\n        "lastName": "Durham",\n        "salary": 47000,\n        "birthDate": "1992-06-16T00:00:00.000Z",\n        "woman": true,\n        "managerID": 412,\n        "employerID": 20,\n        "photo": "[object Picture]",\n        "extra": null,\n        "employer": {\n            "__KEY": 20\n        },\n        "manager": {\n            "__KEY": 412\n        }\n    }]\n')),(0,l.kt)("h4",{id:"example-3-1"},"Example 3"),(0,l.kt)("p",null,"Example with slicing and filtering on properties:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection; $filter : Collection\nvar $employees : cs.EmployeeSelection\n\n$employeesCollection:=New collection\n$filter:=New collection\n$filter.push("firstName")\n$filter.push("lastName")\n \n$employees:=ds.Employee.all()\n$employeesCollection:=$employees.toCollection($filter;0;0;2)\n')),(0,l.kt)("p",null,"Returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Gregg",\n        "lastName": "Wahl"\n    },\n    {\n        "firstName": "Irma",\n        "lastName": "Durham"\n    }\n]\n\n')),(0,l.kt)("h4",{id:"example-4-1"},"Example 4"),(0,l.kt)("p",null,"Example with ",(0,l.kt)("inlineCode",{parentName:"p"},"relatedEntity")," type with simple form:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection : Collection\n$employeesCollection:=New collection\n$employeesCollection:=$employees.toCollection("firstName,lastName,employer")\n')),(0,l.kt)("p",null,"returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n        "employer": {\n            "__KEY": 20\n        }\n    },\n    {\n        "firstName": "Irma",\n        "lastName": "Durham",\n        "employer": {\n            "__KEY": 20\n        }\n    },\n    {\n        "firstName": "Lorena",\n        "lastName": "Boothe",\n        "employer": {\n            "__KEY": 20\n        }\n    }\n   ]\n')),(0,l.kt)("h4",{id:"example-5-1"},"Example 5"),(0,l.kt)("p",null,"Example with ",(0,l.kt)("em",{parentName:"p"},"filterCol")," parameter:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection; $coll : Collection\n$employeesCollection:=New collection\n$coll:=New collection("firstName";"lastName")\n$employeesCollection:=$employees.toCollection($coll)\n')),(0,l.kt)("p",null,"Returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Joanna",\n        "lastName": "Cabrera"\n    },\n    {\n        "firstName": "Alexandra",\n        "lastName": "Coleman"\n    }\n]\n')),(0,l.kt)("h4",{id:"example-6-1"},"Example 6"),(0,l.kt)("p",null,"Example with extraction of all properties of a relatedEntity:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection; $coll : Collection\n$employeesCollection:=New collection\n$coll:=New collection\n$coll.push("firstName")\n$coll.push("lastName")\n$coll.push("employer.*")\n$employeesCollection:=$employees.toCollection($coll)\n')),(0,l.kt)("p",null,"Returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n        "employer": {\n            "ID": 20,\n            "name": "India Astral Secretary",\n            "creationDate": "1984-08-25T00:00:00.000Z",\n            "revenues": 12000000,\n            "extra": null\n        }\n    },\n    {\n        "firstName": "Irma",\n        "lastName": "Durham",\n        "employer": {\n            "ID": 20,\n            "name": "India Astral Secretary",\n            "creationDate": "1984-08-25T00:00:00.000Z",\n            "revenues": 12000000,\n            "extra": null\n        }\n    },\n    {\n        "firstName": "Lorena",\n        "lastName": "Boothe",\n        "employer": {\n            "ID": 20,\n            "name": "India Astral Secretary",\n            "creationDate": "1984-08-25T00:00:00.000Z",\n            "revenues": 12000000,\n            "extra": null\n        }\n    }\n  ]\n')),(0,l.kt)("h4",{id:"example-7-1"},"Example 7"),(0,l.kt)("p",null,"Example with extraction of some properties of a relatedEntity:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection : Collection\n$employeesCollection:=New collection\n$employeesCollection:=$employees.toCollection("firstName, lastName, employer.name")\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n\n        "employer": {\n            "name": "India Astral Secretary"\n        }\n    },\n    {\n        "firstName": "Irma",\n        "lastName": "Durham",\n        "employer": {\n            "name": "India Astral Secretary"\n        }\n    },\n    {\n        "firstName": "Lorena",\n        "lastName": "Boothe",\n        "employer": {\n            "name": "India Astral Secretary"\n        }\n    }]\n')),(0,l.kt)("h4",{id:"example-8-1"},"Example 8"),(0,l.kt)("p",null,"Example with extraction of some properties of ",(0,l.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},' var $employeesCollection : Collection\n $employeesCollection:=New collection\n $employeesCollection:=$employees.toCollection("firstName, lastName, directReports.firstName")\n')),(0,l.kt)("p",null,"Returns:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n        "directReports": []\n    },\n    {\n        "firstName": "Mike",\n        "lastName": "Phan",\n        "directReports": [\n            {\n                "firstName": "Gary"\n            },\n            {\n                "firstName": "Sadie"\n            },\n            {\n                "firstName": "Christie"\n            }\n        ]\n    },\n    {\n        "firstName": "Gary",\n\n        "lastName": "Reichert",\n        "directReports": [\n            {\n                "firstName": "Rex"\n            },\n            {\n                "firstName": "Jenny"\n            },\n            {\n                "firstName": "Lowell"\n            }\n        ]\n    }]\n')),(0,l.kt)("h4",{id:"example-9-1"},"Example 9"),(0,l.kt)("p",null,"Example with extraction of all properties of ",(0,l.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'var $employeesCollection : Collection\n$employeesCollection:=New collection\n$employeesCollection:=$employees.toCollection("firstName, lastName, directReports.*")\n\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-4d"},'[\n    {\n        "firstName": "Gregg",\n        "lastName": "Wahl",\n        "directReports": []\n    },    \n    {\n        "firstName": "Mike",\n        "lastName": "Phan",\n        "directReports": [\n            {\n                "ID": 425,\n                "firstName": "Gary",\n                "lastName": "Reichert",\n                "salary": 65800,\n                "birthDate": "1957-12-23T00:00:00.000Z",\n                "woman": false,\n                "managerID": 424,\n                "employerID": 21,\n                "photo": "[object Picture]",\n                "extra": null,\n                "employer": {\n                    "__KEY": 21\n                },\n                "manager": {\n                    "__KEY": 424\n                }\n            },\n            {\n                "ID": 426,\n                "firstName": "Sadie",\n                "lastName": "Gallant",\n                "salary": 35200,\n                "birthDate": "2022-01-03T00:00:00.000Z",\n                "woman": true,\n                "managerID": 424,\n                "employerID": 21,\n                "photo": "[object Picture]",\n                "extra": null,\n                "employer": {\n                    "__KEY": 21\n                },\n                "manager": {\n                    "__KEY": 424\n                }\n            }\n                   ]\n    },\n    {\n        "firstName": "Gary",\n        "lastName": "Reichert",\n        "directReports": [\n            {\n                "ID": 428,\n                "firstName": "Rex",\n                "lastName": "Chance",\n                "salary": 71600,\n                "birthDate": "1968-08-09T00:00:00.000Z",\n                "woman": false,\n\n                "managerID": 425,\n                "employerID": 21,\n                "photo": "[object Picture]",\n                "extra": null,\n                "employer": {\n                    "__KEY": 21\n                },\n                "manager": {\n                    "__KEY": 425\n                }\n            },\n            {\n                "ID": 429,\n                "firstName": "Jenny",\n                "lastName": "Parks",\n                "salary": 51300,\n                "birthDate": "1984-05-25T00:00:00.000Z",\n                "woman": true,\n                "managerID": 425,\n                "employerID": 21,\n                "photo": "[object Picture]",\n                "extra": null,\n                "employer": {\n                    "__KEY": 21\n                },\n                "manager": {\n                    "__KEY": 425\n                }\n            }\n           ]\n }\n]\n')))}u.isMDXComponent=!0},5194:function(e,t,n){"use strict";t.Z=n.p+"assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png"},2241:function(e,t,n){"use strict";t.Z=n.p+"assets/images/entityselection-193aba9798fd8faddac31ad66bc75f26.PNG"}}]);